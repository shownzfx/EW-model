load("C:/Users/shown/Documents/GitHub/EW-model/nlexperiment results.RData")
ggplot(results1,aes(ewfreq,mean_infra))+
geom_point(aes(color=repairRatio, size =1/intensity_threshold)) +scale_color_gradient(low="green", high="red")
library(nlexperiment)
nl_netlogo_path("C:/Program Files/NetLogo 6.0.2/app")  #to netlogo installation on windows
nl_netlogo_path()
experiment <- nl_experiment(
model_file = "C:/Users/shown/Documents/GitHub/EW-model/EW draft 1.nlogo",
iterations = 100,
repetitions = 3,
param_values = list(
intensity_threshold = seq(0.6,1,0.1),
org_budget = seq(0, 20000, 5000),
repairRatio=seq(0,1,0.1)
),
mapping = c(
intensity_threshold="intensity-threshold",
org_budget="org-budget"
),
step_measures = measures(
mean_damage = "mean [current-damage] of serviceArea"
),
run_measures=measures(
mean_infra="mean [infraQuality] of serviceArea",
org_repair_budget="[orgRepairBudget] of orgs",
org_vulnerability = "mean [infraVulnerablity] of serviceArea",
repair_cost="sum [repairCost] of serviceArea",
extreme_weather_frequency="extremeWeatherFreq"
),
)
experiment <- nl_experiment(
model_file = "C:/Users/shown/Documents/GitHub/EW-model/EW draft 1.nlogo",
iterations = 100,
repetitions = 3,
param_values = list(
intensity_threshold = seq(0.6,1,0.1),
org_budget = seq(0, 100000, 10000),
repairRatio=seq(0,1,0.1)
),
mapping = c(
intensity_threshold="intensity-threshold",
org_budget="org-budget"
),
step_measures = measures(
mean_damage = "mean [current-damage] of serviceArea"
),
run_measures=measures(
mean_infra="mean [infraQuality] of serviceArea",
org_repair_budget="[orgRepairBudget] of orgs",
org_vulnerability = "mean [infraVulnerablity] of serviceArea",
repair_cost="sum [repairCost] of serviceArea",
extreme_weather_frequency="extremeWeatherFreq"
),
)
results<-nl_run(experiment,parallel = T,print_progress = T)
experiment <- nl_experiment(
model_file = "C:/Users/shown/Documents/GitHub/EW-model/EW draft 1.nlogo",
iterations = 100,
repetitions = 3,
param_values = list(
intensity_threshold = seq(0.6,1,0.1),
org_budget = seq(0, 100000, 10000),
repairRatio=seq(0,1,0.1)
),
mapping = c(
intensity_threshold="intensity-threshold",
org_budget="org-budget"
),
step_measures = measures(
mean_damage = "mean [currentDamage] of serviceArea",
mean_prevention="mean [prevention] of serviceArea"
),
run_measures=measures(
mean_infra="mean [infraQuality] of serviceArea",
org_repair_budget="[orgRepairBudget] of orgs",
org_vulnerability = "mean [infraVulnerablity] of serviceArea",
repair_cost="sum [repairCost] of serviceArea",
extreme_weather_frequency="extremeWeatherFreq"
),
)
results<-nl_run(experiment,parallel = T,print_progress = T)
experiment <- nl_experiment(
model_file = "C:/Users/shown/Documents/GitHub/EW-model/EW draft 1.nlogo",
iterations = 100,
repetitions = 3,
param_values = list(
intensity_threshold = seq(0.6,1,0.1),
org_budget = seq(0, 100000, 10000),
repairRatio=seq(0,1,0.1)
),
mapping = c(
intensity_threshold="intensity-threshold",
org_budget="org-budget"
),
step_measures = measures(
mean_damage = "mean [currentDamage] of serviceArea",
mean_prevention="mean [prevention] of serviceArea"
),
run_measures=measures(
mean_infra="mean [infraQuality] of serviceArea",
org_repair_budget="[orgRepairBudget] of orgs",
org_vulnerability = "mean [infraVulnerability] of serviceArea",
repair_cost="sum [repairCost] of serviceArea",
extreme_weather_frequency="extremeWeatherFreq"
),
)
results<-nl_run(experiment,parallel = T,print_progress = T)
results1<-nl_get_result(results)
summary(results1)
View(results1)
library(psych)
library(ggplot2)
ggplot(results1,aes(x=factor(intensity_threshold),y=mean_infra))+
geom_boxplot()
ggplot(results1,aes(x=factor(intensity_threshold),y=mean_infra))+
geom_violin()
ggplot(results1,aes(x=factor(intensity_threshold),y=mean_infra))+
geom_boxplot()
ggplot(results1,aes(x=factor(intensity_threshold),y=mean_infra))+
geom_violin()
ggplot(results1,aes(x=factor(intensity_threshold),y=mean_infra))+
geom_violin() +
stat_summary(fun.y=mean,geom = "line")
ggplot(results1,aes(x=factor(intensity_threshold),y=mean_infra))+
geom_violin() +
stat_summary(fun.y=mean,geom = "line")
ggplot(results1,aes(x=factor(intensity_threshold),y=mean_infra))+
geom_violin() +
stat_summary(fun.y=median,geom = "line")
ggplot(results1,aes(x=factor(intensity_threshold),y=mean_infra))+
geom_violin() +
stat_summary(fun.y=median,geom = "line")
ggplot(results1,aes(x=factor(intensity_threshold),y=mean_infra))+
geom_violin()
ggplot(results1,aes(x=factor(intensity_threshold),y=mean_infra))+
geom_boxplot()
ggplot(results1,aes(x=factor(intensity_threshold),y=mean_infra))+
geom_violin()
count(results1,intensity_threshold)
library(dplyr)
count(results1,intensity_threshold)
ggplot(results1,aes(x=factor(intensity_threshold),y=mean_infra))+
geom_boxplot()
ggplot(results1,aes(x=factor(intensity_threshold),y=mean_infra))+
geom_violin()
ggplot(results1,aes(x=factor(intensity_threshold),y=mean_infra))+
geom_violin() +
stat_summary(fun.y=median)
ggplot(results1,aes(x=factor(intensity_threshold),y=mean_infra))+
geom_violin() +
stat_summary(fun.y=mean)
ggplot(results1,aes(x=factor(intensity_threshold),y=mean_infra))+
geom_violin() +
stat_summary(fun.y=mean, geom = "point")
ggplot(results1,aes(x=factor(intensity_threshold),y=mean_infra))+
geom_violin()+
geom_boxplot(width=0.1)
ggplot(results1,aes(x=factor(intensity_threshold),y=mean_infra))+
geom_boxplot()
ggplot(results1,aes(x=factor(intensity_threshold),y=mean_infra))+
geom_violin() +
stat_summary(fun.y=mean, geom = "point")
ggplot(results1,aes(x=factor(org_budget),y=mean_infra))+
geom_boxplot()
ggplot(results1,aes(x=factor(org_budget),y=mean_infra))+
geom_violin()+
stat_summary(fun.y=median,geom="point")
ggplot(results1,aes(x=factor(repairRatio),y=mean_infra))+
geom_boxplot()
ggplot(results1,aes(x=factor(repairRatio),y=mean_infra))+
geom_violin()+
stat_summary(fun.y = median,geom = "point")
ggplot(results1,aes(ewfreq,mean_infra))+
geom_point(aes(color=repairRatio, size =1/intensity_threshold)) +scale_color_gradient(low="green", high="red")
ggplot(results1,aes(extreme_weather_frequency,mean_infra))+
geom_point(aes(color=repairRatio, size =1/intensity_threshold)) +scale_color_gradient(low="green", high="red")
ggplot(results1,aes(extreme_weather_frequency,mean_infra))+
geom_point(aes(color=repairRatio, size =1/intensity_threshold))
ggplot(results1,aes(extreme_weather_frequency,mean_infra))+
geom_point(aes(color=repairRatio, size =1/intensity_threshold)) +scale_color_gradient(low="green", high="red")
ggplot(results1,aes(extreme_weather_frequency,mean_infra))+
geom_point(aes(color=repairRatio)) +scale_color_gradient(low="green", high="red")
ggplot(results1,aes(extreme_weather_frequency,mean_infra))+
geom_point(aes(color=repairRatio)) +scale_color_gradient(low="green", high="red")
ggplot(results1,aes(extreme_weather_frequency, mean_infra))+
geom_violin()
ggplot(results1,aes(factor(extreme_weather_frequency), mean_infra))+
geom_violin()
ggplot(results1,aes(factor(extreme_weather_frequency), mean_infra))+
geom_boxplot()
ggplot(results1,aes(factor(extreme_weather_frequency), mean_infra))+
geom_line()
ggplot(results1,aes(x=ewfreq,y=mean_infra))+
geom_line()
ggplot(results1,aes(extreme_weather_frequency, mean_infra))+
geom_line()
ggplot(results1,aes(extreme_weather_frequency,mean_infra))+
geom_point(aes(color=repairRatio)) +scale_color_gradient(low="green", high="red")
ggplot(results1,aes(extreme_weather_frequency,mean_infra))+
geom_point(aes(color=repairRatio,size=prevention)) +scale_color_gradient(low="green", high="red")
ggplot(results1,aes(extreme_weather_frequency,mean_infra))+
geom_point(aes(color=repairRatio,size=prevention)) +scale_color_gradient(low="green", high="red")
results2<-nl_get_result(results,type="step")  #look at damage for each tick
summary(results2)
ggplot(results2,aes(x=step_id, y=mean_damage,color=factor(org_budget)))+
geom_line()+
facet_grid(~org_budget)
ggplot(results2,aes(x=step_id, y=mean_damage,color=factor(org_budget)))+
geom_line()
ggplot(results2,aes(x=mean_damage,y=mean_prevention))+
geom_line()
ggplot(results2,aes(x=step_id,y=mean_damage))+
geom_line()
distinct(results2,step_id)
nl_show_step()
?nl_show_step()
nl_show_step(results,x="step_id",y=mean_damage,color="run_id")
nl_show_step(results2,x="step_id",y=mean_damage,color="run_id")
nl_show_step(results,y="mean_damage",x_param="prevention")
ggplot(results2,aes(x=step_id, y=mean_damage,color=factor(prevention)))+
geom_line()+
facet_grid(~org_budget)
ggplot(results2,aes(x=step_id, y=mean_damage,color=factor(mean_prevention)))+
geom_line()+
facet_grid(~org_budget)
ggplot(results2,aes(x=step_id, y=mean_damage,color=factor(mean_prevention)))+
geom_line()
dev.off()
ggplot(results2,aes(x=step_id, y=mean_damage,color=factor(mean_prevention)))+
geom_line()+
facet_grid(~mean_prevention)
ggplot(results2,aes(x=step_id, y=mean_damage))+
geom_line()+
facet_grid(~mean_prevention)
View(results2)
ggplot(results2,aes(x=mean_prevention,y=mean_damage))+
geom_line()
ggplot(results2,aes(x=factor(mean_prevention),y=mean_damage))+
geom_boxplot()
ggplot(results2,aes(x=step_id,y=mean_damage))+
geom_line()
ggplot(results2,aes(x=step_id,y=mean_damage,color=run_id))+
geom_line()
ggplot(results2,aes(x=step_id,y=mean_damage))+
geom_line(color=factor(run_id))
ggplot(results2,aes(x=step_id,y=mean_damage))+
geom_line(aes(color=factor(run_id)))
ggplot(results2,aes(x=step_id,y=mean_damage))+
geom_line(aes(color=factor(run_id)))+
theme(theme_bw())
?theme_bw()
ggplot(results2,aes(x=step_id,y=mean_damage))+
geom_line(aes(color=factor(run_id)))+
theme_bw()
experiment <- nl_experiment(
model_file = "C:/Users/shown/Documents/GitHub/EW-model/EW draft 1.nlogo",
iterations = 100,
repetitions = 3,
param_values = list(
intensity_threshold = seq(0.6,1,0.1),
org_budget = seq(0, 100000, 10000),
repairRatio=seq(0,1,0.1)
),
mapping = c(
intensity_threshold="intensity-threshold",
org_budget="org-budget"
),
# step_measures = measures(
#  mean_damage = "mean [currentDamage] of serviceArea",
#  mean_preventionPerTick="mean [prevention] of serviceArea"
# ),
run_measures=measures(
mean_infra="mean [infraQuality] of serviceArea",
org_repair_budget="[orgRepairBudget] of orgs",
org_vulnerability = "mean [infraVulnerability] of serviceArea",
repair_cost="sum [repairCost] of serviceArea",
extreme_weather_frequency="extremeWeatherFreq",
prevention="mean [prevention] of serviceArea",
damage="mean [currentDamage] of serviceArea"
),
)
results<-nl_run(experiment,parallel = T,print_progress = T)
results<-nl_run(experiment,parallel = T,print_progress = T)
experiment <- nl_experiment(
model_file = "C:/Users/shown/Documents/GitHub/EW-model/EW draft 1.nlogo",
iterations = 100,
repetitions = 3,
param_values = list(
intensity_threshold = seq(0.6,1,0.1),
org_budget = seq(0, 100000, 10000),
repairRatio=seq(0,1,0.1),
extremeWeatherDamage=seq(1,20,5)
),
mapping = c(
intensity_threshold="intensity-threshold",
org_budget="org-budget"
),
# step_measures = measures(
#  mean_damage = "mean [currentDamage] of serviceArea",
#  mean_preventionPerTick="mean [prevention] of serviceArea"
# ),
run_measures=measures(
mean_infra="mean [infraQuality] of serviceArea",
org_repair_budget="[orgRepairBudget] of orgs",
org_vulnerability = "mean [infraVulnerability] of serviceArea",
repair_cost="sum [repairCost] of serviceArea",
extreme_weather_frequency="extremeWeatherFreq",
prevention="mean [prevention] of serviceArea",
damage="mean [currentDamage] of serviceArea"
),
)
results<-nl_run(experiment,parallel = T,print_progress = T)
write.csv(results1,"nlexperiment results.csv")
results1<-nl_get_result(results)
summary(results1)
View(results1)
count(results1,intensity_threshold)
ggplot(results1,aes(x=factor(intensity_threshold),y=mean_infra))+
geom_boxplot()
ggplot(results1,aes(x=factor(intensity_threshold),y=mean_infra))+
geom_violin() +
stat_summary(fun.y=mean, geom = "point")
ggplot(results1,aes(x=factor(intensity_threshold),y=mean_infra))+
geom_boxplot()
ggplot(results1,aes(x=factor(intensity_threshold),y=mean_infra))+
geom_violin() +
stat_summary(fun.y=mean, geom = "point")
ggplot(results1,aes(x=factor(org_budget),y=mean_infra))+
geom_violin()+
stat_summary(fun.y=median,geom="point")
ggplot(results1,aes(x=factor(org_budget),y=mean_infra))+
geom_violin()+
stat_summary(fun.y=median,geom="point")
ggplot(results1,aes(x=factor(repairRatio),y=mean_infra))+
geom_boxplot()
ggplot(results1,aes(x=factor(repairRatio),y=mean_infra))+
geom_violin()+
stat_summary(fun.y = median,geom = "point")
ggplot(results1,aes(extreme_weather_frequency,mean_infra))+
geom_point(aes(color=repairRatio,size=prevention)) +scale_color_gradient(low="green", high="red")
ggplot(results1,aes(extreme_weather_frequency,mean_infra))+
geom_point(aes(color=repairRatio, size =1/intensity_threshold)) +scale_color_gradient(low="green", high="red")
ggplot(results1,aes(x=factor(mean_prevention),y=mean_damage))+
geom_boxplot()
ggplot(results1,aes(x=factor(prevention),y=damage))+
geom_violin()+
stat_summary(fun.y = median,geom = "point")
names(results)
names(results1)
ggplot(results1,aes(x=factor(org_budget),y=mean_infra))+
geom_boxplot()
ggplot(results1,aes(x=factor(prevention),y=damage))+
geom_boxplot()
ggplot(results1,aes(extreme_weather_frequency,mean_infra))+
geom_point(aes(color=repairRatio,size=prevention)) +scale_color_gradient(low="green", high="red")
ggplot(results1,aes(extreme_weather_frequency,mean_infra))+
geom_point(aes(color=prevention)) +scale_color_gradient(low="green", high="red")
ggplot(results1,aes(x=factor(intensity_threshold),y=mean_infra))+
geom_violin() +
stat_summary(fun.y=mean, geom = "point")
ggplot(results1,aes(x=factor(org_budget),y=mean_infra))+
geom_violin()+
stat_summary(fun.y=median,geom="point")
ggplot(results1,aes(x=factor(repairRatio),y=mean_infra))+
geom_violin()+
stat_summary(fun.y = median,geom = "point")
ggplot(results1,aes(x=factor(prevention),y=damage))+
geom_violin()+
stat_summary(fun.y = median,geom = "point")
rm(results2)
save.image("~/GitHub/EW-model/nlexperiment results.RData")
ggplot(results1,aes(x=factor(prevention),y=damage))+
geom_boxplot()
distinct(results1,prevention)
ggplot(results1,aes(x=prevention,y=damage))+
geom_line()
ggplot(results1,aes(extreme_weather_frequency,mean_infra))+
geom_point(aes(color=prevention)) +scale_color_gradient(low="green", high="red")
ggplot(results1,aes(extreme_weather_frequency,mean_infra))+
geom_point(aes(color=repairRatio, size =1/intensity_threshold)) +scale_color_gradient(low="green", high="red")
write.csv(results1,"nlexperiment results.csv")
write.csv(results1,"nlexperiment results 0227.csv")
getwd()
load("~/GitHub/EW-model/.gitignore")
setwd("C:/Users/shown/Documents/GitHub/EW-model")
write.csv(results1,"nlexperiment results.csv")
8/35
25/125
